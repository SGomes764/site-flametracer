---
const features = [
  {
    title: "Inc√™ndios em Tempo Real",
    description:
      "Recebe informa√ß√µes atualizadas sobre inc√™ndios ativos com dados oficiais e localiza√ß√£o precisa no mapa.",
    icon: "üî•",
  },
  {
    title: "Alertas por Localiza√ß√£o",
    description:
      "Ativa notifica√ß√µes para seres avisado imediatamente quando h√° inc√™ndios perto da tua √°rea ou localiza√ß√µes marcadas.",
    icon: "üìç",
  },
  {
    title: "Mapa Interativo",
    description:
      "Explora um mapa din√¢mico com zonas de risco, √°reas afetadas, estado do fogo e recursos de prote√ß√£o civil.",
    icon: "üó∫Ô∏è",
  },
  {
    title: "Hist√≥rico e Estat√≠sticas",
    description:
      "Consulta os dados dos inc√™ndios passados, com gr√°ficos de evolu√ß√£o, causas prov√°veis e √°reas ardidas.",
    icon: "üìä",
  },
];
---

<section id="features" class="section features-section">
  <div class="container">
    <h2 class="section-title">
      <span class="text-gradient">Fun√ß√µes Principais</span>
      <span class="subtitle">Descobre o que torna o Flametracer especial!</span>
    </h2>

    <div class="features-grid">
      {
        features.map((feature, index) => (
          <div class="feature-card fade-in" data-delay={index * 100}>
            <div class="feature-icon">{feature.icon}</div>
            <h3>{feature.title}</h3>
            <p>{feature.description}</p>
          </div>
        ))
      }
    </div>

    <div class="feature-showcase">
      <div class="feature-showcase-content">
        <h3>üó∫Ô∏è O Mapa do FlameTracer</h3>
        <p>
          O mapa interativo do FlameTracer √© o cora√ß√£o da aplica√ß√£o.
          Com uma interface clara e intuitiva, permite-te visualizar, em tempo real, todos os inc√™ndios ativos em Portugal. 
          Alimentado por dados oficiais e atualizado automaticamente, o mapa ajuda-te a compreender a situa√ß√£o no terreno com apenas alguns toques.
        </p>
        <ul class="feature-list">
          <li>üî• Fogo ativo: indica um inc√™ndio em progresso.</li>
          <li>‚úÖ Fogo dominado: inc√™ndio controlado, mas ainda monitorizado.</li>
          <li>‚ùå Fogo extinto: inc√™ndio conclu√≠do, sem risco atual.</li>
          <li>üöí Meios no terreno: mostra se h√° bombeiros, avi√µes ou helic√≥pteros na zona.</li>
          <li>‚ö†Ô∏è Zona de risco elevado: destaca √°reas propensas a reacendimentos ou com vegeta√ß√£o seca.</li>
          <li>üìç A minha localiza√ß√£o: um ponto azul marca a tua posi√ß√£o no mapa, para veres o que est√° √† tua volta.</li>
        </ul>
      </div>

      <div class="feature-showcase-image">
        <img
          src="/assets/featuresimg.jpg"
          alt="Advanced Physics Demo"
        />
      </div>
    </div>
  </div>
</section>

<script>
  // Fade-in animation on scroll
  const observerOptions = {
    threshold: 0.2,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const delay = entry.target.dataset.delay || 0;
        setTimeout(() => {
          entry.target.classList.add("visible");
        }, delay);
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll(".fade-in").forEach((el) => {
    observer.observe(el);
  });
</script>

<style>
  .features-section {
    background-color: var(--color-background-dark);
    position: relative;
    overflow: hidden;
  }

  .features-section::before {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(
      circle at 80% 20%,
      rgba(239, 68, 68, 0.15),
      transparent 60%
    );
    z-index: 0;
  }

  .section-title {
    text-align: center;
    margin-bottom: var(--space-6);
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .subtitle {
    font-size: 1.125rem;
    font-weight: 400;
    color: var(--color-text-secondary);
    margin-top: var(--space-1);
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-4);
    margin-bottom: var(--space-7);
    position: relative;
    z-index: 1;
  }

  .feature-card {
    background: rgba(30, 30, 30, 0.5);
    backdrop-filter: blur(10px);
    border-radius: var(--border-radius-md);
    padding: var(--space-3);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    transition:
      transform var(--transition-fast),
      box-shadow var(--transition-fast);
    border: 1px solid rgba(255, 255, 255, 0.05);
    position: relative;
    z-index: 1;
    height: 100%;
  }

  .feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(239, 68, 68, 0.2);
  }

  .feature-icon {
    font-size: 2.5rem;
    margin-bottom: var(--space-2);
    filter: drop-shadow(0 0 10px rgba(249, 115, 22, 0.5));
  }

  .feature-card h3 {
    margin-bottom: var(--space-1);
    color: var(--color-text-primary);
  }

  .feature-card p {
    color: var(--color-text-secondary);
    margin-bottom: 0;
  }

  .feature-showcase {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-5);
    align-items: center;
    position: relative;
    z-index: 1;
    margin-top: var(--space-6);
  }

  .feature-showcase-content {
    padding-right: var(--space-4);
  }

  .feature-showcase-content h3 {
    margin-bottom: var(--space-2);
    font-size: 1.75rem;
  }

  .feature-showcase-content p {
    margin-bottom: var(--space-3);
    color: var(--color-text-secondary);
  }

  .feature-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .feature-list li {
    position: relative;
    padding-left: var(--space-3);
    margin-bottom: var(--space-1);
    color: var(--color-text-secondary);
  }

  .feature-list li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 10px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: linear-gradient(
      135deg,
      var(--color-primary-500),
      var(--color-secondary-500)
    );
  }

  .feature-showcase-image img {
    width: 100%; /* Mant√©m responsividade */
    max-width: 300px; /* Reduzido de 500px para 300px para torn√°-la mais pequena */
    height: auto; /* Mant√©m a propor√ß√£o */
    border-radius: var(--border-radius-lg);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    transition: transform var(--transition-medium);
  }

  .feature-showcase-image img:hover {
    transform: scale(1.02);
  }

  @media (max-width: 992px) {
    .feature-showcase {
      grid-template-columns: 1fr;
      gap: var(--space-4);
    }

    .feature-showcase-content {
      padding-right: 0;
      order: 1;
    }

    .feature-showcase-image {
      order: 0;
    }

    .feature-showcase-image img {
      max-width: 100%; /* Ocupa toda a largura em telas menores */
    }
  }

  @media (max-width: 576px) {
    .features-grid {
      grid-template-columns: 1fr;
    }

    .feature-showcase-image img {
      max-width: 100%; /* Ajuste para telas muito pequenas */
    }
  }
</style>
